mongodb+srv://manish:<password>@cluster0.qvpi8dz.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0



// Import the MongoDB client
import { MongoClient } from "mongodb";

// MongoURI
const mongoURI = 'mongodb+srv://manish:q1e2r3s4@cluster0.qvpi8dz.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0'; // Replace with your actual MongoDB URI

// Database name
const dbName = 'test_db';

// Create a new MongoClient
const client = new MongoClient(mongoURI);

async function main() {
  try {
    // Connect the client to the server
    await client.connect();
    console.log("Connected successfully to server");

    // Get the list of databases
    const adminDb = client.db().admin();
    const databases = await adminDb.listDatabases();
    const dbExists = databases.databases.some(db => db.name === dbName);
    
    if (dbExists) {
      console.log(`Database '${dbName}' is present`);
    } else {
      console.log(`Database '${dbName}' is not present`);
    }

    // Create or get the database
    const db = client.db(dbName);

    // Get the list of collections
    const collections = await db.listCollections().toArray();
    const collectionExists = collections.some(collection => collection.name === 'mycollection');

    if (collectionExists) {
      console.log(`Collection 'mycollection' is present`);
    } else {
      console.log(`Collection 'mycollection' is not present`);
    }

    // Create or get the collection
    const collection = db.collection('mycollection');
    console.log("Collection 'mycollection' created or accessed successfully");

    // // You can now perform CRUD operations on the collection
    // const document = { name: "Example", type: "document" };
    // const result = await collection.insertOne(document);
    // console.log(`New document created with the following id: ${result.insertedId}`);
  } catch (err) {
    console.error("An error occurred:", err);
  } finally {
    // Close the connection
    await client.close();
    console.log("Connection closed."); 
  }
}

// Run the main function
main().catch(console.error);